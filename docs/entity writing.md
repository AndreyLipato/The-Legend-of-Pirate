# Написание сущностей
# Базовая сущность
Существует два вида сущностей: обычные и живые (могут наносить и получать урон).

Все размеры и координаты указываются в клетках (не в пикселях).

## Создание сущности
```py
from game.entity import Entity

class EntityCoolName(Entity):
	pass
```

У такой сущности будет размер 1 на 1 клетку, скорость 0, и у неё не будет картинки.

## Живая сущность
```py
from game.entity import EntityAlive, EntityGroups

class EntityCoolNameAlive(EntityAlive):
	pass
```

У такой сущности будет сила атаки 0 и кол-во hp - 1

## Настройка Сущности
```py
class EntityCoolName(Entity):
    def __init__(self, screen, data=None):
        super().__init__(screen, data)
        self.свойство = значение
```
Все настраиваемые поля обычной сущности (Entity):

Поле   | Описание      | Значение       | По умолчанию
-------|---------------|----------------|-------------
x      | позиция по x  | float          | 0
y      | позиция по y  | float          | 0
width  | ширина        | float          | 1
height | высота        | float          | 1
speedX | скорость по x | float          | 0
speedY | скорость по y | float          | 0
image  | картинка      | pygame.Surface | None
imagePos | позиция картинки относительно сущности | tuple[float, float] | (0, 0)
animator | анимации | Animator | None

Дополнительные настраиваемые поля для живой сущности (EntityAlive):

Поле     | Описание           | Значение | По умолчанию
---------|--------------------|----------|-------------
health   | hp                 | int      | 1
strength | сила удара         | int      | 0
alive    | жива ли            | bool     | True
immortal | игноририет ли урон | bool     | False
group    | группа             |          | EntityGroups.neutral

alive - если False, то начинается анимация гибели, после которой сущность удаляется.

group - группа, к которй относиться сущность. Для определения кто кому может наносить урон.

Группа                  | Кто             | Кого бьёт
------------------------|-----------------|----------
EntityGroups.neutral    | Например кактус | player, enemy, playerSelf
EntityGroups.player     | Все союзники    | enemy, neutral
EntityGroups.enemy      | Все противники  | player, playerSelf
EntityGroups.playerSelf | Игрок           |


## Картинка сущности
Для добавления картинки её необходимо положить в папку **src/data/images/entities**

Для загрузки изображения используется функция load_entityImg, с параметрами:
1. название файла
2. требуемая ширина картинки (в клетках)
3. требуемая высота
```py
class EntityCoolName(Entity):
    image = load_entityImg("image_name.png", 1, 1)

    def __init__(self, screen, data=None):
        super().__init__(screen, data)
        self.image = EntityCoolName.image
```

## Анимации
### Картинки
Для добавления анимаций их необходимо положить в папку **src/data/images/entities/название_сущности**

Каждая картинка должна называться так же, как анимация

В каждой картинке должны быть все кадры анимации в одну строку без промежутков между кадрами. Каждый кадр должен быть одинакогово размера.

Пример картинки с анимацией:

![](/imgs/animation.png)

Между пиратами есть промежуток, так как размер кадра должен быть одинаковый.
В том месте, где у первого пирата пусто, у последнего лопата.

В разных анимациях размер и кол-во кадров не обязаны совпадать.

### Загрузка
Для загрузки анимаций необходимо создать AnimatorData, вне класса (или статическим полем):

```py
animatorData = AnimatorData("папка_с_анимаиями", [])

class EntityCoolName(Entity):
	pass
```

Вторым параметром AnimatorData принемает список всех анимаций.
Каждый елемент списка - это tuple из четырёх элементов:
1. str - название файла с анимацией
2. int - промежуток между кадрами анимации (в милисекундах)
3. tuple[int, int] - размер одного кадра анимации в картинке с анимацией (в пикселях)
4. tuple[float, float, float, float] - позиция картинки относительно сущности и размер требуемой картинки (в клетках) - (x, y, w, h)

Пример:
```py
animatorData = AnimatorData("cool_entity", [
    ("going.png", 150, (12, 24), (0, -0.5, 0.75, 1.5)),
])
```
Аниматор:
1. Загрузит картинку **going.png** из папки **src/data/images/entities/cool_entity**
2. Разделит её на кадры размером 12 на 24
3. Увеличит каждый кадр до размера 0.75 на 1.5 (клеток)
4. Сохранит анимацию под именем **going**

### Использование
Сущности необходимо создать Animator

```py
animatorData = AnimatorData("папка_с_анимаиями", [
    ("going.png", 150, (12, 24), (0, -0.5, 0.75, 1.5)),
    # и другие
])

class EntityCoolName(Entity):
    def __init__(self, screen, data=None):
        super().__init__(screen, data)
        self.animator = Animator(animatorData, "название анимации")
```

У Animator есть методы:
* setAnimation("название анимации") - запустить анимацию
* curAnimation() - возвращает название текущей анимации


# Сущность с "кодом"
Для всего, что сложнее, чем кактус, необходимо модифицировать работу сущности.

